<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNN Exercises - ML Roadmap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .exercise-item {
            border-left: 4px solid #e5e7eb;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
            transition: all 0.2s;
        }
        .exercise-item.completed {
            border-left-color: #10b981;
            opacity: 0.7;
        }
        .exercise-item h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        .exercise-item.completed h3 {
            text-decoration: line-through;
            color: #9ca3af;
        }
        .section-header {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #10b981;
            padding-bottom: 0.5rem;
        }
        .content-text {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }
        .content-text.completed {
            color: #9ca3af;
        }
        .checkbox-custom {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
            accent-color: #10b981;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-emerald-50 via-teal-50 to-green-50 min-h-screen">
    <div class="max-w-5xl mx-auto p-4 md:p-8">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-3xl font-bold text-gray-800">CNN Exercises</h1>
                <div class="flex space-x-2">
                    <a href="../solutions/cnn_solutions.html" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-semibold">
                        View Solutions
                    </a>
                    <a href="../../index.html" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold">
                        ‚Üê Back to Roadmap
                    </a>
                </div>
            </div>
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4 text-sm text-gray-600">
                    <span>‚è±Ô∏è Time: 4-5 hours</span>
                    <span>üìä Difficulty: Advanced</span>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600 mb-1">Progress: <span id="progress-text" class="font-bold text-emerald-600">0%</span></div>
                    <div class="w-48 bg-gray-200 rounded-full h-2">
                        <div id="progress-bar" class="bg-emerald-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="bg-white rounded-lg shadow-lg p-8">
            <div class="mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded">
                <p class="text-sm text-gray-700">
                    <strong>Instructions:</strong> Implement CNNs from scratch using NumPy.
                    Check off each exercise as you complete it to track your progress.
                </p>
            </div>

            <h2 class="section-header">Part 1: Convolution Basics (35 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-1.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-1.1')">
                    <div class="flex-1">
                        <h3>Exercise 1.1: 2D Convolution by Hand</h3>
                        <div class="content-text">
                            <strong>Given:</strong>
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 4√ó4: [[1,2,3,0], [0,1,2,3], [3,0,1,2], [2,3,0,1]]</li>
                                <li>Kernel 3√ó3 (edge detector): [[1,0,-1], [1,0,-1], [1,0,-1]]</li>
                                <li>No padding, stride=1</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>What is output size? Use formula: (n - k + 1)</li>
                                <li>Calculate first output value at position [0,0]</li>
                                <li>Calculate all 4 output values</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-1.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-1.2')">
                    <div class="flex-1">
                        <h3>Exercise 1.2: Padding Effects</h3>
                        <div class="content-text">
                            <strong>Given:</strong> Same input and kernel from Exercise 1.1
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 4√ó4: [[1,2,3,0], [0,1,2,3], [3,0,1,2], [2,3,0,1]]</li>
                                <li>Kernel 3√ó3: [[1,0,-1], [1,0,-1], [1,0,-1]]</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Add zero padding (pad=1) ‚Üí what is new padded input size?</li>
                                <li>What is output size with padding? Use: (n + 2p - k + 1)</li>
                                <li>Why use padding? (List benefits)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-1.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-1.3')">
                    <div class="flex-1">
                        <h3>Exercise 1.3: Stride Effects</h3>
                        <div class="content-text">
                            <strong>Given:</strong>
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 5√ó5 (you can use any values)</li>
                                <li>Kernel 3√ó3 (you can use any values)</li>
                                <li>Stride=2, no padding</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Calculate output size using: ((n - k)/stride) + 1</li>
                                <li>Compare with stride=1 output size</li>
                                <li>Why use larger strides? (List benefits and trade-offs)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-1.4">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-1.4')">
                    <div class="flex-1">
                        <h3>Exercise 1.4: Multiple Channels</h3>
                        <div class="content-text">
                            <strong>Given:</strong>
                            <ul class="list-disc ml-6 my-2">
                                <li>Input: 3√ó3√ó2 (width√óheight√ó2 channels, you can use any values)</li>
                                <li>Kernel: 3√ó3√ó2 (one 3√ó3 filter per input channel)</li>
                                <li>No padding, stride=1</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Convolve each input channel with its corresponding kernel slice</li>
                                <li>Sum the results across all channels to get a single output value</li>
                                <li>What is the output size?</li>
                                <li>How many multiplications per output value? (k √ó k √ó C)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Part 2: Pooling Operations (30 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-2.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-2.1')">
                    <div class="flex-1">
                        <h3>Exercise 2.1: Max Pooling</h3>
                        <div class="content-text">
                            <strong>Given:</strong>
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 4√ó4: [[1,3,2,4], [5,6,7,8], [9,2,3,1], [4,5,6,7]]</li>
                                <li>2√ó2 max pooling, stride=2</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Divide into four 2√ó2 regions</li>
                                <li>Take max of each region</li>
                                <li>What is the output size? Use: (n / pool_size)</li>
                                <li>Why use max pooling? (List benefits)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-2.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-2.2')">
                    <div class="flex-1">
                        <h3>Exercise 2.2: Average Pooling</h3>
                        <div class="content-text">
                            <strong>Given:</strong> Same input from Exercise 2.1
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 4√ó4: [[1,3,2,4], [5,6,7,8], [9,2,3,1], [4,5,6,7]]</li>
                                <li>2√ó2 average pooling, stride=2</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Apply average pooling (compute mean of each 2√ó2 region)</li>
                                <li>Compare results with max pooling from Exercise 2.1</li>
                                <li>When to use average vs max pooling?</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-2.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-2.3')">
                    <div class="flex-1">
                        <h3>Exercise 2.3: Global Average Pooling</h3>
                        <div class="content-text">
                            <strong>Given:</strong>
                            <ul class="list-disc ml-6 my-2">
                                <li>Input 4√ó4√ó3 (width√óheight√ó3 channels, you can use any values)</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Compute mean of each channel across all spatial positions ‚Üí 3 scalar values</li>
                                <li>What is the output shape?</li>
                                <li>What is a common use case? (Hint: replacing FC layers)</li>
                                <li>What is the main benefit? (Hint: parameters)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Part 3: CNN Forward Pass (30 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-3.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-3.1')">
                    <div class="flex-1">
                        <h3>Exercise 3.1: Single Conv Layer</h3>
                        <div class="content-text">
                            Input: 5√ó5√ó1, Conv: 3√ó3, 2 filters:
                            <ol class="list-decimal ml-6 my-2">
                                <li>How many kernels? (2)</li>
                                <li>Kernel dimensions? (3√ó3√ó1)</li>
                                <li>Output shape?</li>
                                <li>Parameters count?</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-3.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-3.2')">
                    <div class="flex-1">
                        <h3>Exercise 3.2: Conv + ReLU + Pool</h3>
                        <div class="content-text">
                            <strong>Given:</strong> Input 8√ó8√ó1
                            <ul class="list-disc ml-6 my-2">
                                <li><strong>Layer 1:</strong> Conv 3√ó3, 4 filters, stride=1, pad=1 ‚Üí ReLU ‚Üí MaxPool 2√ó2</li>
                                <li><strong>Layer 2:</strong> Conv 3√ó3, 8 filters, stride=1, pad=1 ‚Üí ReLU ‚Üí MaxPool 2√ó2</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>What shape after Layer 1 Conv? After Pool?</li>
                                <li>What shape after Layer 2 Conv? After Pool?</li>
                                <li>Total parameters in both conv layers? (weights + biases)</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-3.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-3.3')">
                    <div class="flex-1">
                        <h3>Exercise 3.3: Receptive Field</h3>
                        <div class="content-text">
                            3-layer CNN: Conv 3√ó3 ‚Üí Conv 3√ó3 ‚Üí Conv 3√ó3:
                            <ol class="list-decimal ml-6 my-2">
                                <li>First layer: 3√ó3</li>
                                <li>Second layer: ?</li>
                                <li>Third layer: calculate receptive field</li>
                                <li>Formula: RF = 1 + Œ£(k - 1)¬∑‚àèstrides</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Part 4: CNN Backpropagation (45 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-4.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-4.1')">
                    <div class="flex-1">
                        <h3>Exercise 4.1: Convolution Backward Pass</h3>
                        <div class="content-text">
                            Forward: Y = conv(X, W), given dL/dY:
                            <ol class="list-decimal ml-6 my-2">
                                <li>To get dL/dW: convolve X with dL/dY</li>
                                <li>To get dL/dX: full conv of dL/dY with flipped W</li>
                                <li>Implement for 3√ó3 case</li>
                                <li>Verify with numerical gradients</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-4.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-4.2')">
                    <div class="flex-1">
                        <h3>Exercise 4.2: Max Pooling Backward</h3>
                        <div class="content-text">
                            Backward given dL/dY:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Route gradient to positions that were max</li>
                                <li>Other positions get 0</li>
                                <li>Implement for 2√ó2 pooling</li>
                                <li>Compare with average pooling</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-4.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-4.3')">
                    <div class="flex-1">
                        <h3>Exercise 4.3: Full CNN Backward</h3>
                        <div class="content-text">
                            Conv ‚Üí ReLU ‚Üí MaxPool ‚Üí FC ‚Üí Softmax:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Start from softmax gradient</li>
                                <li>Backprop through FC, unflatten</li>
                                <li>Backprop through MaxPool, ReLU</li>
                                <li>Backprop through Conv</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-4.4">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-4.4')">
                    <div class="flex-1">
                        <h3>Exercise 4.4: Gradient Flow</h3>
                        <div class="content-text">
                            Deep CNN with 20 layers:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Why no vanishing gradients like FC nets?</li>
                                <li>Role of skip connections (ResNet)</li>
                                <li>Batch normalization effect</li>
                                <li>Compare first vs last layer gradients</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Part 5: BatchNorm (30 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-5.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-5.1')">
                    <div class="flex-1">
                        <h3>Exercise 5.1: BatchNorm Forward</h3>
                        <div class="content-text">
                            <strong>Given:</strong> Batch of 4 samples, 3 features each
                            <ul class="list-disc ml-6 my-2">
                                <li>X = [[1,2,3], [4,5,6], [7,8,9], [10,11,12]]</li>
                                <li>Œ≥ (gamma) = 1, Œ≤ (beta) = 0</li>
                                <li>Œµ (epsilon) = 1e-8</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Compute mean Œº per feature (column-wise)</li>
                                <li>Compute variance œÉ¬≤ per feature</li>
                                <li>Normalize: X_norm = (X - Œº) / ‚àö(œÉ¬≤ + Œµ)</li>
                                <li>Scale and shift: Y = Œ≥¬∑X_norm + Œ≤ (in this case Y = X_norm)</li>
                                <li>Verify: output should have mean‚âà0, variance‚âà1 per feature</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-5.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-5.2')">
                    <div class="flex-1">
                        <h3>Exercise 5.2: BatchNorm Backward</h3>
                        <div class="content-text">
                            Given dL/dY, compute gradients:
                            <ol class="list-decimal ml-6 my-2">
                                <li>dL/dŒ≤ = sum of dL/dY</li>
                                <li>dL/dŒ≥ = sum of dL/dY ‚äô X_norm</li>
                                <li>dL/dX via chain rule</li>
                                <li>Why is BatchNorm backward complex?</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-5.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-5.3')">
                    <div class="flex-1">
                        <h3>Exercise 5.3: Why BatchNorm Works</h3>
                        <div class="content-text">
                            Analyze BatchNorm benefits:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Internal covariate shift</li>
                                <li>Smoother loss landscape</li>
                                <li>Regularization effect</li>
                                <li>Train vs test behavior</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Part 6: CNN Architectures (35 min)</h2>

            <div class="exercise-item" data-exercise-id="cnn-6.1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-6.1')">
                    <div class="flex-1">
                        <h3>Exercise 6.1: LeNet-5</h3>
                        <div class="content-text">
                            Design LeNet for 28√ó28 grayscale (MNIST):
                            <ol class="list-decimal ml-6 my-2">
                                <li>Conv 5√ó5, 6 ‚Üí Pool ‚Üí Conv 5√ó5, 16 ‚Üí Pool</li>
                                <li>FC 120 ‚Üí FC 84 ‚Üí FC 10</li>
                                <li>Calculate shapes at each layer</li>
                                <li>Total parameters?</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-6.2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-6.2')">
                    <div class="flex-1">
                        <h3>Exercise 6.2: VGG Block</h3>
                        <div class="content-text">
                            Multiple 3√ó3 convs vs larger kernels:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Stack two 3√ó3: receptive field?</li>
                                <li>Compare params: two 3√ó3 vs one 5√ó5</li>
                                <li>Why 3√ó3 better?</li>
                                <li>Implement VGG block</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-6.3">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-6.3')">
                    <div class="flex-1">
                        <h3>Exercise 6.3: ResNet Skip Connection</h3>
                        <div class="content-text">
                            <strong>Given:</strong> Residual block with skip connection
                            <ul class="list-disc ml-6 my-2">
                                <li>Input: 16√ó16√ó64</li>
                                <li>Output: 16√ó16√ó64 (same dimensions)</li>
                                <li>Formula: output = F(x) + x</li>
                            </ul>
                            <strong>Tasks:</strong>
                            <ol class="list-decimal ml-6 my-2">
                                <li>Design the block: x ‚Üí Conv 3√ó3, 64 ‚Üí BN ‚Üí ReLU ‚Üí Conv 3√ó3, 64 ‚Üí BN</li>
                                <li>Add skip connection: out = F(x) + x (element-wise addition)</li>
                                <li>Apply final ReLU</li>
                                <li>Why does skip connection help gradient flow during training?</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <h2 class="section-header">Challenge Problems (Optional)</h2>

            <div class="exercise-item" data-exercise-id="cnn-challenge-1">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-challenge-1')">
                    <div class="flex-1">
                        <h3>Challenge 1: Implement Conv2D from Scratch</h3>
                        <div class="content-text">
                            NumPy only:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Forward: conv2d(X, W, stride, pad)</li>
                                <li>Backward: gradients w.r.t X and W</li>
                                <li>Handle batches and channels</li>
                                <li>Verify with numerical gradients</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="exercise-item" data-exercise-id="cnn-challenge-2">
                <label class="flex items-start space-x-3 cursor-pointer">
                    <input type="checkbox" class="checkbox-custom mt-1" onchange="toggleExercise('cnn-challenge-2')">
                    <div class="flex-1">
                        <h3>Challenge 2: Train Tiny CNN on MNIST</h3>
                        <div class="content-text">
                            Implement and train:
                            <ol class="list-decimal ml-6 my-2">
                                <li>Architecture: Conv-Pool-Conv-Pool-FC</li>
                                <li>Load MNIST or generate toy data</li>
                                <li>Train with SGD + momentum</li>
                                <li>Achieve >95% accuracy</li>
                            </ol>
                        </div>
                    </div>
                </label>
            </div>

            <div class="mt-8 p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold text-gray-800 mb-2">Tips for Success</h3>
                <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1">
                    <li><strong>Visualize convolutions</strong> - Draw receptive fields</li>
                    <li><strong>Check shapes</strong> - Dimensional analysis prevents bugs</li>
                    <li><strong>Padding preserves size</strong> - pad = (k-1)/2</li>
                    <li><strong>Skip connections</strong> - Enable very deep networks</li>
                    <li><strong>Start simple</strong> - Single conv layer first</li>
                </ul>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-6 text-center text-gray-600 text-sm space-x-4">
            <a href="../solutions/cnn_solutions.html" class="text-emerald-600 hover:text-emerald-700 font-semibold">
                View Solutions ‚Üí
            </a>
            <span>|</span>
            <a href="../../index.html" class="text-indigo-600 hover:text-indigo-700 font-semibold">
                ‚Üê Back to ML Roadmap
            </a>
        </div>
    </div>

    <script>
        // GitHub sync configuration
        const GITHUB_USERNAME = 'luisdecunto';
        const GITHUB_REPO = 'ml-roadmap';
        const PROGRESS_FILE = 'progress.json';

        let fileSha = null;

        // Sync exercise completions from GitHub on page load
        async function syncFromGitHub() {
            try {
                const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${PROGRESS_FILE}`, {
                    headers: {
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    fileSha = data.sha; // Store SHA for updates
                    const content = JSON.parse(atob(data.content));

                    if (content.exerciseCompletions) {
                        // Merge with existing localStorage (prefer GitHub data)
                        localStorage.setItem('exercise-completions', JSON.stringify(content.exerciseCompletions));
                    }
                }
            } catch (error) {
                console.log('Could not sync from GitHub, using local data:', error);
            }
        }

        // Save exercise completions to GitHub
        async function saveToGitHub() {
            const token = localStorage.getItem('githubToken');
            if (!token || !fileSha) return;

            try {
                // Get current progress data
                const getCurrentProgress = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${PROGRESS_FILE}`, {
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Authorization': `token ${token}`
                    }
                });

                if (getCurrentProgress.ok) {
                    const currentData = await getCurrentProgress.json();
                    const currentContent = JSON.parse(atob(currentData.content));
                    fileSha = currentData.sha; // Update SHA

                    // Update only exerciseCompletions
                    const exerciseCompletions = JSON.parse(localStorage.getItem('exercise-completions') || '{}');
                    currentContent.exerciseCompletions = exerciseCompletions;
                    currentContent.lastUpdated = new Date().toISOString();

                    // Save back to GitHub
                    const content = btoa(JSON.stringify(currentContent, null, 2));
                    const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${PROGRESS_FILE}`, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update exercise progress',
                            content: content,
                            sha: fileSha
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        fileSha = data.content.sha;
                        console.log('Progress saved to GitHub');
                    }
                }
            } catch (error) {
                console.error('Error saving to GitHub:', error);
            }
        }

        // Load completion state from localStorage
        function loadCompletionState() {
            const state = JSON.parse(localStorage.getItem('exercise-completions') || '{}');
            let completed = 0;
            let total = 0;

            document.querySelectorAll('.exercise-item').forEach(item => {
                const id = item.getAttribute('data-exercise-id');
                const checkbox = item.querySelector('input[type="checkbox"]');
                total++;

                if (state[id]) {
                    checkbox.checked = true;
                    item.classList.add('completed');
                    item.querySelectorAll('.content-text').forEach(el => el.classList.add('completed'));
                    completed++;
                }
            });

            updateProgress(completed, total);
        }

        // Toggle exercise completion
        function toggleExercise(exerciseId) {
            const state = JSON.parse(localStorage.getItem('exercise-completions') || '{}');
            state[exerciseId] = !state[exerciseId];

            if (!state[exerciseId]) {
                delete state[exerciseId];
            }

            localStorage.setItem('exercise-completions', JSON.stringify(state));

            // Save to GitHub
            saveToGitHub();

            // Notify other windows/tabs about the change
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'exercise-completions',
                newValue: JSON.stringify(state),
                url: window.location.href,
                storageArea: localStorage
            }));

            // Update UI
            const item = document.querySelector(`[data-exercise-id="${exerciseId}"]`);
            if (state[exerciseId]) {
                item.classList.add('completed');
                item.querySelectorAll('.content-text').forEach(el => el.classList.add('completed'));
            } else {
                item.classList.remove('completed');
                item.querySelectorAll('.content-text').forEach(el => el.classList.remove('completed'));
            }

            // Recalculate progress
            loadCompletionState();
        }

        // Update progress bar
        function updateProgress(completed, total) {
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = percentage + '%';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await syncFromGitHub();
            loadCompletionState();
        });
    </script>
</body>
</html>
